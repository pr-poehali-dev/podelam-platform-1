import { useEffect, useRef, useState } from "react";
import { useNavigate } from "react-router-dom";
import Icon from "@/components/ui/icon";

// ‚îÄ‚îÄ‚îÄ –¢–ò–ü–´ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

type BotStep =
  | "welcome"
  | "collect_activities"
  | "show_top2"
  | "ask_segment_why"
  | "show_professions"
  | "collect_ratings"
  | "filter_ratings"
  | "ask_final_choice"
  | "report";

type Message = { id: number; from: "bot" | "user"; text: string; widget?: Widget };

type Widget =
  | { type: "button_list"; options: string[] }
  | { type: "rating_list"; professions: string[] }
  | { type: "textarea_submit"; placeholder: string };

// ‚îÄ‚îÄ‚îÄ –°–ï–ì–ú–ï–ù–¢–´ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const SEGMENT_NAMES: Record<string, string> = {
  creative: "–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏–µ",
  help_people: "–ü–æ–º–æ—â—å –∏ –∑–∞–±–æ—Ç–∞ –æ –ª—é–¥—è—Ö",
  analytics: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å–∏—Å—Ç–µ–º–Ω–æ—Å—Ç—å",
  business: "–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏ –¥–µ–Ω—å–≥–∏",
  education: "–û–±—É—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π",
  communication: "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏ –≤–ª–∏—è–Ω–∏–µ",
  management: "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
  practical: "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
  research: "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ",
  freedom: "–°–≤–æ–±–æ–¥–∞ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ñ–æ—Ä–º–∞—Ç",
};

const SEGMENT_KEYWORDS: Record<string, string[]> = {
  creative: [
    "—Ä–∏—Å–æ–≤–∞","–ø–∏—Å–∞","—Å–Ω–∏–º–∞","—Å–æ–∑–¥–∞–≤–∞","–¥–∏–∑–∞–π–Ω","–º—É–∑—ã–∫","—Å—Ü–µ–Ω","–∫–æ–Ω—Ç–µ–Ω—Ç","–∞—Ä—Ç","—Ñ–æ—Ç–æ","–≤–∏–¥–µ–æ","—Ç–≤–æ—Ä—á","—Ä–∏—Å—É–Ω","–∫—Ä–∞","–∂–∏–≤–æ–ø–∏—Å","—Å–∫—É–ª—å–ø","–∏–ª–ª—é—Å—Ç—Ä","–∞–Ω–∏–º–∞","–∫–∏–Ω–æ","—Ç–µ–∞—Ç—Ä","—Ç–∞–Ω—Ü","–ø–µ","—Å–æ—á–∏–Ω","—Å—Ç–∏","—Ç–µ–∫—Å—Ç","–±–ª–æ–≥","–ø–æ–¥–∫–∞—Å—Ç","–∞–≤—Ç–æ—Ä","–∫–Ω–∏–≥","—Å—Ç–∏—Ö–∏","–ø–µ—Å–Ω","–º–æ–¥–∞","—Å—Ç–∏–ª—å","—É–∫—Ä–∞—à","–¥–µ–∫–æ—Ä","–∫–æ–ª–ª–∞–∂","–≥—Ä–∞—Ñ","—à—Ä–∏—Ñ—Ç","—Ç–∏–ø–æ–≥—Ä–∞—Ñ","—Ä–µ—Ç—É—à–∏—Ä","–º–æ–Ω—Ç–∞–∂","—Å—Ü–µ–Ω","—Ä–µ–∂",
  ],
  help_people: [
    "–ø–æ–º–æ–≥–∞","–∫–æ–Ω—Å—É–ª—å—Ç","–ª–µ—á","–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞","–∫–æ—É—á","–ø—Å–∏—Ö–æ–ª–æ–≥","–ø–æ–º–æ—â","–∑–∞–±–æ—Ç","—É—Ö–æ–¥","—Ä–µ–∞–±–∏–ª–∏—Ç","—Å–æ—Ü–∏–∞–ª","–≤–æ–ª–æ–Ω—Ç","–±–ª–∞–≥–æ—Ç–≤–æ—Ä","–∏—Å—Ü–µ–ª","—Ç–µ—Ä–∞–ø–µ–≤—Ç","–Ω–∞—Å—Ç–∞–≤–Ω–∏—á","–º–µ–Ω—Ç–æ—Ä","–º–µ–¥–∏–∫","—Å–µ—Å—Ç—Ä","—Å–∞–Ω–∏—Ç–∞—Ä","—Ñ–µ–ª—å–¥—à","–ø–µ–¥–∏–∞—Ç—Ä","–¥–æ–∫—Ç–æ—Ä","–≤—Ä–∞—á","–º–∞—Å—Å–∞–∂","—Ñ–∏–∑–∏–æ—Ç–µ—Ä","–¥–∏–µ—Ç–æ–ª","–Ω—É—Ç—Ä–∏—Ü–∏–æ–ª","–ø—Å–∏—Ö","—Ç—Ä–µ–Ω–µ—Ä","–∏–Ω—Å—Ç—Ä—É","–æ–±—É—á–µ–Ω","—Ä–∞–∑–≤–∏–≤","–ø–æ–¥–¥–µ—Ä–∂–∫","–ø–æ–º–æ—â–Ω–∏–∫","–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü","–ø—Å–∏—Ö–æ—Ç–µ—Ä",
  ],
  analytics: [
    "–∞–Ω–∞–ª–∏–∑","–¥–∞–Ω–Ω","—Ü–∏—Ñ—Ä","—Å–∏—Å—Ç–µ–º","–ª–æ–≥–∏–∫","–∏—Å—Å–ª–µ–¥–æ–≤–∞","—Å—Ç–∞—Ç–∏—Å—Ç","–º–∞—Ç–µ–º–∞—Ç","–ø—Ä–æ–≥—Ä–∞–º–º","–∫–æ–¥","–∞–ª–≥–æ—Ä–∏—Ç–º","–º–æ–¥–µ–ª","—Ä–∞—Å—á–µ—Ç","—Ç–∞–±–ª–∏—Ü","—ç–∫—Å–µ–ª","sql","python","excel","–∞—É–¥–∏—Ç","–±—É—Ö–≥–∞–ª—Ç","–Ω–∞–ª–æ–≥","—Ñ–∏–Ω–∞–Ω—Å","—ç–∫–æ–Ω–æ–º","–ø—Ä–æ–≥–Ω–æ–∑","–º–µ—Ç—Ä–∏–∫","kpi","–∞–Ω–∞–ª–∏—Ç","–æ–ø—Ç–∏–º–∏–∑","–∞–≤—Ç–æ–º–∞—Ç","–ø—Ä–æ—Ü–µ—Å—Å","—Å—Ö–µ–º","–¥–∏–∞–≥—Ä–∞–º","–≥—Ä–∞—Ñ","–≤–∏–∑—É–∞–ª–∏–∑","–æ—Ç—á–µ—Ç","–¥–∞—à–±–æ—Ä–¥","bi","ml","–Ω–µ–π—Ä–æ—Å–µ—Ç","–∏–∏",
  ],
  business: [
    "–±–∏–∑–Ω–µ—Å","–¥–µ–Ω—å–≥","–¥–æ—Ö–æ–¥","–ø—Ä–∏–±—ã–ª","–ø—Ä–æ–¥–∞–∂","—Ç–æ—Ä–≥–æ–≤","–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞","—Å—Ç–∞—Ä—Ç","–∫–æ–º–ø–∞–Ω","—Ñ–∏—Ä–º","–º–∞–≥–∞–∑–∏–Ω","—Ç–æ–≤–∞—Ä","—Å–µ—Ä–≤–∏—Å","–∫–ª–∏–µ–Ω—Ç","—Ä—ã–Ω–æ–∫","–º–∞—Ä–∫–µ—Ç","—Ä–µ–∫–ª–∞–º","–±—Ä–µ–Ω–¥","–º–æ–Ω–µ—Ç–∏–∑","–∏–Ω–≤–µ—Å—Ç","–∫—Ä–∏–ø—Ç","—Ç—Ä–µ–π–¥","–Ω–µ–¥–≤–∏–∂","–∞–∫—Ü–∏","—Ñ–∏–Ω–∞–Ω—Å","–±–∞–Ω–∫","–∫—Ä–µ–¥–∏—Ç","–∑–∞–π–º","–∞—Ä–µ–Ω–¥","—Ñ—Ä–∞–Ω—à","–ø–∞—Ä—Ç–Ω–µ—Ä","–∫–æ–º–º–µ—Ä—Ü","b2b","b2c","—Å–¥–µ–ª–∫","–ø–µ—Ä–µ–≥–æ–≤","–ø—Ä–æ–¥–∞–≤–∞","–∫—É–ø–ª","–ø—Ä–æ–¥–∞–∂","—ç–∫—Å–ø–æ—Ä—Ç","–∏–º–ø–æ—Ä—Ç",
  ],
  education: [
    "—É—á–∏—Ç","–ø—Ä–µ–ø–æ–¥–∞–≤–∞","–æ–±—É—á–µ–Ω","–∫—É—Ä—Å","—Ç—Ä–µ–Ω–∏–Ω–≥","–ª–µ–∫—Ü","—Å–µ–º–∏–Ω–∞—Ä","—É—Ä–æ–∫","–ø–µ–¥–∞–≥–æ–≥","—à–∫–æ–ª","—É–Ω–∏–≤–µ—Ä—Å","—Å—Ç—É–¥–µ–Ω—Ç","—É—á–µ–Ω–∏–∫","–≤–æ—Å–ø–∏—Ç–∞","—Ä–∞–∑–≤–∏–≤–∞","–ø–µ—Ä–µ–¥–∞–≤–∞","–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫","–º–µ–Ω—Ç–æ—Ä","–∫–æ—É—á","–º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å","–≤–µ–±–∏–Ω–∞—Ä","–æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å","–æ–±—Ä–∞–∑–æ–≤–∞–Ω","–ø—Ä–æ–≥—Ä–∞–º–º –æ–±—É—á–µ–Ω","–º–µ—Ç–æ–¥–∏–∫","—É—á–µ–±–Ω–∏–∫","–∑–Ω–∞–Ω–∏","–Ω–∞–≤—ã–∫","–∫–æ–º–ø–µ—Ç–µ–Ω—Ü","–∫–≤–∞–ª–∏—Ñ–∏–∫","—Å–µ—Ä—Ç–∏—Ñ–∏–∫","–¥–∏–ø–ª–æ–º","—ç–∫–∑–∞–º–µ–Ω","–∞—Ç—Ç–µ—Å—Ç–∞—Ü",
  ],
  communication: [
    "–æ–±—â–µ–Ω","–≥–æ–≤–æ—Ä","–ø–µ—Ä–µ–≥–æ–≤","–ø—É–±–ª–∏—á","–≤—ã—Å—Ç—É–ø","–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü","–º–µ–¥–∏–∞","–∂—É—Ä–Ω–∞–ª–∏—Å—Ç","–∏–Ω—Ç–µ—Ä–≤—å—é","pr","–ø–∏–∞—Ä","smm","—Å–æ—Ü—Å–µ—Ç","–∏–Ω—Å—Ç–∞–≥—Ä","—Ç–∏–∫—Ç–æ–∫","—é—Ç—É–±","—Å—Ç—Ä–∏–º","–±–ª–æ–≥","–ø–æ–¥–∫–∞—Å—Ç","–≤–µ–¥—É—â","–¥–∏–∫—Ç–æ—Ä","—Ä–∞–¥–∏–æ","—Ç–µ–ª–µ–≤–∏–¥","—Ä–µ–∫–ª–∞–º","–∫–æ–ø–∏—Ä–∞–π—Ç","—É–±–µ–∂–¥–∞","–≤–ª–∏—è","–∞—É–¥–∏—Ç–æ—Ä","—Å–ø–∏–∫–µ—Ä","–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü","–Ω–µ—Ç–≤–æ—Ä–∫","—Å–æ–æ–±—â–µ—Å—Ç–≤","–∫–æ–º–º—É–Ω–∏–∫–∞—Ü","–ø–µ—Ä–µ–≥–æ–≤–æ—Ä","–¥–∏–ø–ª–æ–º–∞—Ç","–ø—Ä–æ–¥–≤–∏–∂",
  ],
  management: [
    "—É–ø—Ä–∞–≤–ª—è","–æ—Ä–≥–∞–Ω–∏–∑","—Ä—É–∫–æ–≤–æ–¥","–º–µ–Ω–µ–¥–∂","–ø–ª–∞–Ω","–∫–æ–æ—Ä–¥–∏–Ω","–∫–æ–Ω—Ç—Ä–æ–ª","–ø—Ä–æ–µ–∫—Ç","–∫–æ–º–∞–Ω–¥","–ª–∏–¥–µ—Ä","–¥–∏—Ä–µ–∫—Ç–æ—Ä","–Ω–∞—á–∞–ª—å–Ω–∏–∫","hr","–∫–∞–¥—Ä","–Ω–∞–π–º","–º–æ—Ç–∏–≤–∞—Ü","–¥–µ–ª–µ–≥–∏—Ä","–ø—Ä–æ—Ü–µ—Å—Å","–æ–ø–µ—Ä–∞—Ü","–ª–æ–≥–∏—Å—Ç","—Ü–µ–ø–æ—á–∫","—Ä–∞—Å–ø—Ä–µ–¥","–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç","–±—é–¥–∂–µ—Ç","—Ä–µ—Å—É—Ä—Å","scrum","agile","kanban","pm","–ø—Ä–æ–¥—É–∫—Ç","—Å—Ç—Ä–∞—Ç–µ–≥","—Å—Ç—Ä—É–∫—Ç—É—Ä","—Ä–µ–≥–ª–∞–º–µ–Ω—Ç","—Å—Ç–∞–Ω–¥–∞—Ä—Ç","–∫–ø—ç","kpi",
  ],
  practical: [
    "—Ä—É–∫–∞–º–∏","—Å—Ç—Ä–æ–∏—Ç","—Ä–µ–º–æ–Ω—Ç","—Ç–µ—Ö–Ω–∏–∫","–º–µ—Ö–∞–Ω","—ç–ª–µ–∫—Ç—Ä","—Å–∞–Ω—Ç–µ—Ö–Ω","–ø–ª–æ—Ç–Ω–∏–∫","—Å—Ç–æ–ª—è—Ä","—Å–≤–∞—Ä–∫","–∫—É–∑–Ω","–ø–æ–≤–∞—Ä","–∫—É–ª–∏–Ω–∞—Ä","–≤—ã–ø–µ—á–∫","–∫–æ–Ω–¥–∏—Ç–µ—Ä","—à–∏—Ç—å","–≤—è–∑–∞","–∫—Ä–æ–π","–ø–∞—Ä–∏–∫–º–∞—Ö","–º–∞—Å—Ç–µ—Ä –Ω–æ–≥—Ç","—Ç–∞—Ç—É","–±–∞—Ä–±–µ—Ä","–∞–≤—Ç–æ","–º–æ—Ç–æ—Ü–∏–∫–ª","—Å–ø–æ—Ä—Ç","—Ñ–∏—Ç–Ω–µ—Å","—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫","–±–µ–≥","–ø–ª–∞–≤–∞–Ω–∏","–µ–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤","—Ç—É—Ä–∏–∑–º","–ø–æ—Ö–æ–¥–Ω","–∫–µ–º–ø","—Ä—ã–±–∞–ª–∫","–æ—Ö–æ—Ç","–æ–≥–æ—Ä–æ–¥","—Å–∞–¥","–¥–∞—á–Ω",
  ],
  research: [
    "–∏—Å—Å–ª–µ–¥–æ–≤–∞","–∏–∑—É—á","—Ä–∞–∑—Ä–∞–±–∞—Ç","–Ω–∞—É–∫","—ç–∫—Å–ø–µ—Ä","—Ç–µ—Å—Ç","–≥–∏–ø–æ—Ç–µ–∑","–ª–∞–±–æ—Ä–∞—Ç–æ—Ä","–±–∏–æ–ª–æ–≥","—Ö–∏–º","—Ñ–∏–∑–∏–∫","–º–µ–¥–∏—Ü–∏–Ω","—Ñ–∞—Ä–º–∞—Ü–µ–≤—Ç","–≥–µ–æ–ª–æ–≥","–∞—Å—Ç—Ä–æ–Ω–æ–º","–∞–Ω—Ç—Ä–æ–ø–æ–ª","—Å–æ—Ü–∏–æ–ª–æ–≥","–ø—Å–∏—Ö–æ–ª–æ–≥ –∏—Å—Å–ª–µ–¥","–º–∞—Ä–∫–µ—Ç –∏—Å—Å–ª–µ–¥","–∞–Ω–∫–µ—Ç","–æ–ø—Ä–æ—Å","—Ñ–æ–∫—É—Å-–≥—Ä—É–ø–ø","–¥–∞—Ç–∞","big data","–Ω–µ–π—Ä–æ—Å–µ—Ç","–ø–∞—Ç–µ–Ω—Ç","–∏–Ω–Ω–æ–≤–∞—Ü","—Ç–µ—Ö–Ω–æ–ª–æ–≥","r&d","—Ä–∞–∑—Ä–∞–±–æ—Ç–∫","–ø—Ä–æ—Ç–æ—Ç–∏–ø","mvp","—Å—Ç–∞—Ä—Ç–∞–ø –∏—Å—Å–ª–µ–¥",
  ],
  freedom: [
    "—Å–≤–æ–±–æ–¥","–ø—É—Ç–µ—à–µ—Å—Ç–≤","—É–¥–∞–ª–µ–Ω–Ω","—Ñ—Ä–∏–ª–∞–Ω—Å","–Ω–µ–∑–∞–≤–∏—Å–∏–º","—Å–∞–º —Å–µ–±–µ","—Å–≤–æ —Ä–∞—Å–ø–∏—Å–∞–Ω","–≥–∏–±–∫","–Ω–µ—Ç –æ—Ñ–∏—Å","—É–¥–∞–ª","–Ω–æ–º–∞–¥","—Ü–∏—Ñ—Ä–æ–≤","—Å–æ–±—Å—Ç–≤–µ–Ω","–±–µ–∑ –Ω–∞—á–∞–ª—å–Ω","—Å–≤–æ –ø—Ä–æ–µ–∫—Ç","–ø–∞—Å—Å–∏–≤–Ω","–∞–≤—Ç–æ–Ω–æ–º","—Å–æ–±—Å—Ç–≤–µ–Ω –±–∏–∑–Ω–µ—Å","–æ–Ω–ª–∞–π–Ω","–¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω","–ø–µ—Ä–µ–µ–∑–¥","—ç–º–∏–≥—Ä–∞—Ü","–¥—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥","–¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω","–¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω–∞","–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω","–≤—ã–±–∏—Ä–∞—Ç—å","—Å–∞–º —Ä–µ—à","—Å–∞–º –ø–ª–∞–Ω",
  ],
};

// ‚îÄ‚îÄ‚îÄ –ú–û–¢–ò–í–ê–¶–ò–Ø ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const MOTIVATION_MARKERS: Record<string, string[]> = {
  meaning: ["—Å–º—ã—Å–ª","–ø–æ–ª—å–∑","–≤–∫–ª–∞–¥","–≤–∞–∂–Ω","—Ü–µ–Ω–Ω–æ—Å—Ç","–ø–æ–ª–µ–∑–Ω","–¥–æ–±—Ä","–ø–æ–º–æ–≥","–∏–∑–º–µ–Ω–∏—Ç","–º–∏—Ä","–ª—é–¥—è–º","–æ–±—â–µ—Å—Ç","–º–∏—Å—Å–∏—è","–ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω","–∑–Ω–∞—á–∏–º"],
  money: ["–¥–µ–Ω—å–≥","–¥–æ—Ö–æ–¥","–∑–∞—Ä–∞–±–æ—Ç","–ø—Ä–∏–±—ã–ª","–±–æ–≥–∞—Ç—Å—Ç–≤","—Ñ–∏–Ω–∞–Ω—Å","–∑–∞—Ä–ø–ª–∞—Ç","–æ–ø–ª–∞—Ç","–¥–µ–Ω–µ–∂–Ω","—Å–æ—Å—Ç–æ—è–Ω","–æ–±–µ—Å–ø–µ—á","–ø—Ä–∏–±—ã–ª—å–Ω","–≤—ã—Å–æ–∫ –¥–æ—Ö–æ–¥","—Ö–æ—Ä–æ—à –∑–∞—Ä–∞–±–∞—Ç","–º–Ω–æ–≥–æ –ø–ª–∞—Ç—è—Ç"],
  recognition: ["–ø—Ä–∏–∑–Ω–∞–Ω","–∏–∑–≤–µ—Å—Ç–Ω","—É–≤–∞–∂–µ–Ω","–ø–æ–ø—É–ª—è—Ä–Ω","—Å–ª–∞–≤","–∏–º—è","–±—Ä–µ–Ω–¥","–∞—É–¥–∏—Ç–æ—Ä","–ø–æ–¥–ø–∏—Å—á–∏–∫","–ª–∞–π–∫","–∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç","—ç–∫—Å–ø–µ—Ä—Ç","–º–Ω–µ–Ω","—Ä–µ–ø—É—Ç–∞—Ü","—Å—Ç–∞—Ç—É—Å"],
  freedom: ["—Å–≤–æ–±–æ–¥","–≥–∏–±–∫–æ—Å—Ç","–Ω–µ–∑–∞–≤–∏—Å–∏–º","–±–µ–∑ —Ä–∞–º–æ–∫","–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω","—Å–∞–º —Å–µ–±–µ","–≤—ã–±–∏—Ä","—Ö–æ—á—É","–Ω—Ä–∞–≤–∏—Ç","–º–Ω–µ —Ä–µ—à–∞","—Å–≤–æ –≤—Ä–µ–º","–Ω–µ—Ç –æ—Ñ–∏—Å","—Å–∞–º –ø–ª–∞–Ω–∏—Ä","–∞–≤—Ç–æ–Ω–æ–º"],
  process: ["–∏–Ω—Ç–µ—Ä–µ—Å–Ω","—É–≤–ª–µ–∫–∞","–Ω—Ä–∞–≤–∏—Ç","–∑–∞—Ö–≤–∞—Ç","–∫–∞–π—Ñ","–∫–∞–π—Ñ–æ–≤–∞—Ç—å","–ª—é–±–ª—é","–æ–±–æ–∂–∞","–≤ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤","—Å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º","–ø—Ä–æ—Ü–µ—Å—Å","–ø–æ–≥—Ä—É–∂–µ–Ω","–∑–∞–∂–∏–≥–∞","–≤–¥–æ—Ö–Ω–æ–≤–ª—è","—Å—Ç—Ä–∞—Å—Ç"],
  status: ["—Å—Ç–∞—Ç—É—Å","—É—Ä–æ–≤–µ–Ω","–∫–∞—Ä—å–µ—Ä","–ø–æ–∑–∏—Ü","–¥–æ–ª–∂–Ω–æ—Å—Ç","–¥–∏—Ä–µ–∫—Ç–æ—Ä","—Ä—É–∫–æ–≤–æ–¥–∏—Ç","–≥–ª–∞–≤–Ω","–ª—É—á—à","—Ç–æ–ø","—ç–ª–∏—Ç","–ø—Ä–µ—Å—Ç–∏–∂","–≤—ã—Å–æ–∫ —É—Ä–æ–≤–µ–Ω","–≤–µ—Ä—à–∏–Ω","–¥–æ—Å—Ç–∏–∂–µ–Ω"],
};

const MOTIVATION_NAMES: Record<string, string> = {
  meaning: "–°–º—ã—Å–ª –∏ –ø–æ–ª—å–∑–∞",
  money: "–î–µ–Ω—å–≥–∏ –∏ –¥–æ—Ö–æ–¥",
  recognition: "–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ –∏ –∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç—å",
  freedom: "–°–≤–æ–±–æ–¥–∞ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å",
  process: "–ò–Ω—Ç–µ—Ä–µ—Å –∫ –ø—Ä–æ—Ü–µ—Å—Å—É",
  status: "–°—Ç–∞—Ç—É—Å –∏ –∫–∞—Ä—å–µ—Ä–∞",
};

// ‚îÄ‚îÄ‚îÄ –ü–†–û–§–ï–°–°–ò–ò ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

type Profession = { name: string; tags: string[] };

const SEGMENT_PROFESSIONS: Record<string, Profession[]> = {
  creative: [
    { name: "–ö–æ–Ω—Ç–µ–Ω—Ç-–∫—Ä–µ–∞—Ç–æ—Ä / –±–ª–æ–≥–µ—Ä", tags: ["recognition", "freedom"] },
    { name: "–î–∏–∑–∞–π–Ω–µ—Ä (–≥—Ä–∞—Ñ–∏–∫–∞, UX)", tags: ["process", "status"] },
    { name: "–ö–æ–ø–∏—Ä–∞–π—Ç–µ—Ä / —Å—Ç–æ—Ä–∏—Ç–µ–ª–ª–µ—Ä", tags: ["freedom", "process"] },
    { name: "–§–æ—Ç–æ–≥—Ä–∞—Ñ", tags: ["freedom", "recognition"] },
    { name: "–í–∏–¥–µ–æ–≥—Ä–∞—Ñ / –º–æ–Ω—Ç–∞–∂—ë—Ä", tags: ["recognition", "process"] },
    { name: "–ò–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä", tags: ["process", "meaning"] },
    { name: "–ú—É–∑—ã–∫–∞–Ω—Ç / —Å–∞—É–Ω–¥-–¥–∏–∑–∞–π–Ω–µ—Ä", tags: ["process", "recognition"] },
    { name: "SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç", tags: ["communication", "recognition"] },
    { name: "–ê—Ä—Ç-–¥–∏—Ä–µ–∫—Ç–æ—Ä", tags: ["status", "management"] },
    { name: "–†–µ–∂–∏—Å—Å—ë—Ä / —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç", tags: ["recognition", "process"] },
  ],
  help_people: [
    { name: "–ü—Å–∏—Ö–æ–ª–æ–≥ / –∫–æ—É—á", tags: ["meaning", "process"] },
    { name: "–ù—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥ / –¥–∏–µ—Ç–æ–ª–æ–≥", tags: ["meaning", "freedom"] },
    { name: "–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä", tags: ["meaning", "recognition"] },
    { name: "–ú–µ–¥–∏–∞—Ç–æ—Ä / –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–ª–æ–≥", tags: ["meaning", "status"] },
    { name: "HR / —Ä–µ–∫—Ä—É—Ç–µ—Ä", tags: ["meaning", "communication"] },
    { name: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—Ç–Ω–∏–∫", tags: ["meaning"] },
    { name: "–ú–∞—Å—Å–∞–∂–∏—Å—Ç / —Ç–µ–ª–µ—Å–Ω—ã–π —Ç–µ—Ä–∞–ø–µ–≤—Ç", tags: ["meaning", "freedom"] },
    { name: "–í–æ–ª–æ–Ω—Ç—ë—Ä / –ù–ö–û-–º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["meaning"] },
    { name: "–û–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç", tags: ["freedom", "meaning"] },
    { name: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏–∏", tags: ["meaning", "process"] },
  ],
  analytics: [
    { name: "–ê–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö", tags: ["process", "status"] },
    { name: "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫", tags: ["money", "status"] },
    { name: "–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫", tags: ["status", "money"] },
    { name: "Data Scientist", tags: ["process", "status"] },
    { name: "–ê—É–¥–∏—Ç–æ—Ä", tags: ["status", "money"] },
    { name: "SEO-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç", tags: ["process", "freedom"] },
    { name: "–ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫", tags: ["process", "status"] },
    { name: "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä / –Ω–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç", tags: ["money", "status"] },
    { name: "–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫", tags: ["process", "status"] },
    { name: "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å —Ä—ã–Ω–∫–∞", tags: ["process", "money"] },
  ],
  business: [
    { name: "–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å / –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∞—Ä—Ç–∞–ø–∞", tags: ["money", "status", "freedom"] },
    { name: "–¢—Ä–µ–π–¥–µ—Ä / –∏–Ω–≤–µ—Å—Ç–æ—Ä", tags: ["money", "freedom"] },
    { name: "–ü—Ä–æ–¥–∞–∂–Ω–∏–∫ / –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º", tags: ["money", "recognition"] },
    { name: "–ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥", tags: ["money", "recognition"] },
    { name: "–§—Ä–∞–Ω—á–∞–π–∑–∏", tags: ["money", "status"] },
    { name: "–†–∏–µ–ª—Ç–æ—Ä", tags: ["money", "freedom"] },
    { name: "Affiliate-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥", tags: ["money", "freedom"] },
    { name: "E-commerce –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å", tags: ["money", "freedom"] },
    { name: "–ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç", tags: ["money", "status"] },
    { name: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∑–∞–∫—É–ø–∫–∞–º", tags: ["money", "process"] },
  ],
  education: [
    { name: "–û–Ω–ª–∞–π–Ω-–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å / –∞–≤—Ç–æ—Ä –∫—É—Ä—Å–∞", tags: ["meaning", "freedom", "money"] },
    { name: "–¢—Ä–µ–Ω–µ—Ä / –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä", tags: ["meaning", "recognition"] },
    { name: "–†–µ–ø–µ—Ç–∏—Ç–æ—Ä", tags: ["meaning", "freedom"] },
    { name: "–ú–µ—Ç–æ–¥–æ–ª–æ–≥ / –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω–µ—Ä", tags: ["process", "meaning"] },
    { name: "–î–µ—Ç—Å–∫–∏–π –ø–µ–¥–∞–≥–æ–≥", tags: ["meaning"] },
    { name: "–ö—É—Ä–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–∞", tags: ["meaning", "freedom"] },
    { name: "–ú–µ–Ω—Ç–æ—Ä / –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫", tags: ["meaning", "recognition"] },
    { name: "–ê–≤—Ç–æ—Ä –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤", tags: ["meaning", "freedom"] },
    { name: "–õ–µ–∫—Ç–æ—Ä / —Å–ø–∏–∫–µ—Ä", tags: ["recognition", "meaning"] },
    { name: "–®–∫–æ–ª—å–Ω—ã–π —É—á–∏—Ç–µ–ª—å", tags: ["meaning", "status"] },
  ],
  communication: [
    { name: "–í–µ–¥—É—â–∏–π –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π", tags: ["recognition", "freedom"] },
    { name: "PR-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç", tags: ["recognition", "status"] },
    { name: "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç / —Ä–µ–¥–∞–∫—Ç–æ—Ä", tags: ["meaning", "recognition"] },
    { name: "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—â–∏–∫ / –¥–∏–ø–ª–æ–º–∞—Ç", tags: ["status", "recognition"] },
    { name: "–ü—É–±–ª–∏—á–Ω—ã–π —Å–ø–∏–∫–µ—Ä", tags: ["recognition", "status"] },
    { name: "Community-–º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["meaning", "process"] },
    { name: "–ù–µ—Ç–≤–æ—Ä–∫-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä", tags: ["recognition", "process"] },
    { name: "–ò–Ω—Ç–µ—Ä–≤—å—é–µ—Ä / –ø–æ–¥–∫–∞—Å—Ç–µ—Ä", tags: ["recognition", "process"] },
    { name: "–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["process", "status"] },
    { name: "–†–µ–∫–ª–∞–º–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["money", "recognition"] },
  ],
  management: [
    { name: "–ü—Ä–æ–¥–∂–µ–∫—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["status", "process"] },
    { name: "–ü—Ä–æ–¥–∞–∫—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["status", "money"] },
    { name: "–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä", tags: ["status", "money"] },
    { name: "HR-–¥–∏—Ä–µ–∫—Ç–æ—Ä", tags: ["status", "meaning"] },
    { name: "Event-–º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["process", "recognition"] },
    { name: "–õ–æ–≥–∏—Å—Ç / supply chain", tags: ["process", "status"] },
    { name: "Scrum-–º–∞—Å—Ç–µ—Ä / Agile-–∫–æ—É—á", tags: ["process", "meaning"] },
    { name: "–û—Ñ–∏—Å-–º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["process"] },
    { name: "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞", tags: ["status", "recognition"] },
    { name: "–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["status", "process"] },
  ],
  practical: [
    { name: "–ú–∞—Å—Ç–µ—Ä —Ä—É—á–Ω–æ–≥–æ —Ç—Ä—É–¥–∞ (—Å—Ç–æ–ª—è—Ä, —Å–≤–∞—Ä—â–∏–∫)", tags: ["process", "freedom"] },
    { name: "–ü–æ–≤–∞—Ä / —à–µ—Ñ-–ø–æ–≤–∞—Ä", tags: ["process", "recognition"] },
    { name: "–ö–æ–Ω–¥–∏—Ç–µ—Ä", tags: ["process", "recognition"] },
    { name: "–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä / –±–∞—Ä–±–µ—Ä", tags: ["freedom", "recognition"] },
    { name: "–ú–∞—Å—Ç–µ—Ä –º–∞–Ω–∏–∫—é—Ä–∞ / –±—Ä–æ–≤–∏—Å—Ç", tags: ["freedom", "money"] },
    { name: "–¢–∞—Ç—É-–º–∞—Å—Ç–µ—Ä", tags: ["recognition", "freedom"] },
    { name: "–õ–∏—á–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä (–æ—Ñ–ª–∞–π–Ω)", tags: ["meaning", "freedom"] },
    { name: "–ê–≤—Ç–æ–º–µ—Ö–∞–Ω–∏–∫ / –¥–µ—Ç–µ–π–ª–µ—Ä", tags: ["process", "money"] },
    { name: "–§–µ—Ä–º–µ—Ä / –∞–≥—Ä–æ–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å", tags: ["freedom", "meaning"] },
    { name: "–ú–∞—Å—Ç–µ—Ä –ø–æ —Ä–µ–º–æ–Ω—Ç—É", tags: ["process", "money"] },
  ],
  research: [
    { name: "UX-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å", tags: ["process", "meaning"] },
    { name: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å", tags: ["process", "money"] },
    { name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å", tags: ["process", "status"] },
    { name: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", tags: ["status", "process"] },
    { name: "–ë–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥ / —Ñ–∞—Ä–º–∞—Ü–µ–≤—Ç", tags: ["meaning", "status"] },
    { name: "–°–æ—Ü–∏–æ–ª–æ–≥ / –∞–Ω—Ç—Ä–æ–ø–æ–ª–æ–≥", tags: ["meaning", "process"] },
    { name: "–ü–∞—Ç–µ–Ω—Ç–Ω—ã–π –ø–æ–≤–µ—Ä–µ–Ω–Ω—ã–π", tags: ["status", "money"] },
    { name: "R&D-–º–µ–Ω–µ–¥–∂–µ—Ä", tags: ["process", "status"] },
    { name: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ AI/ML", tags: ["process", "status", "money"] },
    { name: "–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ / QA-–∏–Ω–∂–µ–Ω–µ—Ä", tags: ["process", "status"] },
  ],
  freedom: [
    { name: "–¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ—á–µ–≤–Ω–∏–∫ / —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç", tags: ["freedom"] },
    { name: "–§—Ä–∏–ª–∞–Ω—Å–µ—Ä (–ª—é–±–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)", tags: ["freedom", "money"] },
    { name: "–û–Ω–ª–∞–π–Ω-–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å", tags: ["freedom", "money"] },
    { name: "–ò–Ω—Ñ–æ–±–∏–∑–Ω–µ—Å–º–µ–Ω", tags: ["freedom", "money", "recognition"] },
    { name: "–î—Ä–æ–ø—à–∏–ø–ø–µ—Ä / –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–∏–∫", tags: ["freedom", "money"] },
    { name: "–¢—É—Ä–∞–≥–µ–Ω—Ç / travel-–±–ª–æ–≥–µ—Ä", tags: ["freedom", "recognition"] },
    { name: "–£–¥–∞–ª—ë–Ω–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç", tags: ["freedom", "meaning"] },
    { name: "–ê–≤—Ç–æ—Ä –ø–∞—Å—Å–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (—à–∞–±–ª–æ–Ω—ã, –∫—É—Ä—Å—ã)", tags: ["freedom", "money"] },
    { name: "–ö–æ—É—á –æ–Ω–ª–∞–π–Ω", tags: ["freedom", "meaning"] },
    { name: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏", tags: ["freedom", "process"] },
  ],
};

// ‚îÄ‚îÄ‚îÄ –ü–†–û–§–ò–õ–ò ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const PROFILE_MATRIX: Record<string, Record<string, string>> = {
  meaning: {
    creative: "–û—Å–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–≤–æ—Ä–µ—Ü",
    help_people: "–û—Å–æ–∑–Ω–∞–Ω–Ω—ã–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫",
    analytics: "–°–∏—Å—Ç–µ–º–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",
    business: "–ú–∏—Å—Å–∏–æ–Ω–µ—Ä-–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",
    education: "–í–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π —É—á–∏—Ç–µ–ª—å",
    communication: "–ì–æ–ª–æ—Å –ø–µ—Ä–µ–º–µ–Ω",
    management: "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –ª–∏–¥–µ—Ä",
    practical: "–ú–∞—Å—Ç–µ—Ä —Å –¥—É—à–æ–π",
    research: "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –±—É–¥—É—â–µ–≥–æ",
    freedom: "–°–≤–æ–±–æ–¥–Ω—ã–π —Å–æ–∑–∏–¥–∞—Ç–µ–ª—å",
  },
  money: {
    creative: "–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∫—Ä–µ–∞—Ç–æ—Ä",
    help_people: "–ü—Ä–∞–≥–º–∞—Ç–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫",
    analytics: "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫",
    business: "–°—Ç—Ä–∞—Ç–µ–≥-–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",
    education: "–ú–æ–Ω–µ—Ç–∏–∑–∞—Ç–æ—Ä –∑–Ω–∞–Ω–∏–π",
    communication: "–ü—Ä–æ–¥–∞—é—â–∏–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä",
    management: "–†–µ–∑—É–ª—å—Ç–∞—Ç–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä",
    practical: "–ú–∞—Å—Ç–µ—Ä-–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",
    research: "–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",
    freedom: "–§–∏–Ω–∞–Ω—Å–æ–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã–π",
  },
  recognition: {
    creative: "–ó–≤—ë–∑–¥–Ω—ã–π —Ç–≤–æ—Ä–µ—Ü",
    help_people: "–ò–∑–≤–µ—Å—Ç–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç-–ø–æ–º–æ—â–Ω–∏–∫",
    analytics: "–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫",
    business: "–ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",
    education: "–õ–∏–¥–µ—Ä-–ø—Ä–æ—Å–≤–µ—Ç–∏—Ç–µ–ª—å",
    communication: "–ü—É–±–ª–∏—á–Ω–∞—è —Ñ–∏–≥—É—Ä–∞",
    management: "–í–ª–∏—è—Ç–µ–ª—å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å",
    practical: "–ú–∞—Å—Ç–µ—Ä —Å –∏–º–µ–Ω–µ–º",
    research: "–ü—Ä–∏–∑–Ω–∞–Ω–Ω—ã–π —É—á—ë–Ω—ã–π",
    freedom: "–ò–∑–≤–µ—Å—Ç–Ω—ã–π –Ω–æ–º–∞–¥",
  },
  freedom: {
    creative: "–°–≤–æ–±–æ–¥–Ω—ã–π —Å–æ–∑–¥–∞—Ç–µ–ª—å",
    help_people: "–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–º–æ—â–Ω–∏–∫",
    analytics: "–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫",
    business: "–°–≤–æ–±–æ–¥–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",
    education: "–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–µ–¥–∞–≥–æ–≥",
    communication: "–°–≤–æ–±–æ–¥–Ω—ã–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä",
    management: "–ì–∏–±–∫–∏–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä",
    practical: "–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–∞—Å—Ç–µ—Ä",
    research: "–°–≤–æ–±–æ–¥–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",
    freedom: "–ê–±—Å–æ–ª—é—Ç–Ω—ã–π –∞–≤—Ç–æ–Ω–æ–º–∏—Å—Ç",
  },
  process: {
    creative: "–í–ª—é–±–ª—ë–Ω–Ω—ã–π –≤ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ",
    help_people: "–ü—Ä–µ–¥–∞–Ω–Ω—ã–π —Å–≤–æ–µ–º—É –¥–µ–ª—É",
    analytics: "–õ—é–±–∏—Ç–µ–ª—å –¥–∞–Ω–Ω—ã—Ö",
    business: "–ê–∑–∞—Ä—Ç–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",
    education: "–£–≤–ª–µ—á—ë–Ω–Ω—ã–π –ø–µ–¥–∞–≥–æ–≥",
    communication: "–°—Ç—Ä–∞—Å—Ç–Ω—ã–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä",
    management: "–ü—Ä–æ—Ü–µ—Å—Å-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–∏–¥–µ—Ä",
    practical: "–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫-–ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç",
    research: "–£—á—ë–Ω—ã–π-—ç–Ω—Ç—É–∑–∏–∞—Å—Ç",
    freedom: "–ì–µ–¥–æ–Ω–∏—Å—Ç-–ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫",
  },
  status: {
    creative: "–≠–ª–∏—Ç–Ω—ã–π —Ç–≤–æ—Ä–µ—Ü",
    help_people: "–°—Ç–∞—Ç—É—Å–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç",
    analytics: "–¢–æ–ø-–∞–Ω–∞–ª–∏—Ç–∏–∫",
    business: "–ë–∏–∑–Ω–µ—Å-—ç–ª–∏—Ç–∞",
    education: "–ü—Ä–æ—Ñ–µ—Å—Å–æ—Ä-–∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç",
    communication: "–í–ª–∏—è—Ç–µ–ª—å–Ω—ã–π —Å–ø–∏–∫–µ—Ä",
    management: "–¢–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä",
    practical: "–ú–∞—Å—Ç–µ—Ä –≤—ã—Å—à–µ–≥–æ –∫–ª–∞—Å—Å–∞",
    research: "–í–µ–¥—É—â–∏–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",
    freedom: "–£—Å–ø–µ—à–Ω—ã–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π",
  },
};

// ‚îÄ‚îÄ‚îÄ –¢–ï–ö–°–¢–´ –≠–ù–ï–†–ì–ò–ò –ò –í–´–ì–û–†–ê–ù–ò–Ø ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const ENERGY_TEXT: Record<string, string> = {
  creative: "—Å–æ–∑–¥–∞–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ, –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã, –ø–æ–ª—É—á–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –Ω–∞ —Å–≤–æ—ë —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ",
  help_people: "–ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –≤–∏–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∂–∏–∑–Ω–∏ –¥—Ä—É–≥–∏—Ö, –æ—â—É—â–∞—Ç—å —Å–≤–æ—é –Ω—É–∂–Ω–æ—Å—Ç—å",
  analytics: "—Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –Ω–∞—Ö–æ–¥–∏—Ç—å –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤ –¥–∞–Ω–Ω—ã—Ö, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã",
  business: "—Å—Ç—Ä–æ–∏—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å, –≤–∏–¥–µ—Ç—å —Ä–æ—Å—Ç —Ü–∏—Ñ—Ä, –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏",
  education: "–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è, –≤–∏–¥–µ—Ç—å –∫–∞–∫ —Ä–∞—Å—Ç—É—Ç —É—á–µ–Ω–∏–∫–∏, —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –≤–µ—â–µ–π",
  communication: "–æ–±—â–∞—Ç—å—Å—è, —É–±–µ–∂–¥–∞—Ç—å, –≤–ª–∏—è—Ç—å –Ω–∞ –ª—é–¥–µ–π, —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—é",
  management: "–æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –ª—é–¥–µ–π –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã, –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—ã, –¥–æ–±–∏–≤–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–æ–π",
  practical: "—Ä–∞–±–æ—Ç–∞—Ç—å —Ä—É–∫–∞–º–∏, –≤–∏–¥–µ—Ç—å –æ—Å—è–∑–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ",
  research: "—É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ —Ç–µ–º—É, –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã ¬´–ø–æ—á–µ–º—É¬ª, –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã",
  freedom: "—Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Å–≤–æ—ë–º —Ä–∏—Ç–º–µ, –≤—ã–±–∏—Ä–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏ –º–µ—Å—Ç–æ, –Ω–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —á—É–∂–∏—Ö —Ä–µ—à–µ–Ω–∏–π",
};

const BURNOUT_TEXT: Record<string, string> = {
  creative: "–º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±–µ–∑ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞, –∂—ë—Å—Ç–∫–∏–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–∞–º–∫–∏, —Ä–∞–±–æ—Ç–∞ ¬´–ø–æ —à–∞–±–ª–æ–Ω—É¬ª",
  help_people: "—Ä–∞–±–æ—Ç–∞ –±–µ–∑ –æ—Ç–¥–∞—á–∏ –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≥—Ä—É–∑, –ø–æ–º–æ—â—å —á–µ—Ä–µ–∑ —Å–∏–ª—É",
  analytics: "—Ö–∞–æ—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Å–∏—Å—Ç–µ–º—ã, –¥–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∞–Ω–∞–ª–∏–∑, —Ä–∞–±–æ—Ç–∞ ¬´–Ω–∞ –æ—â—É–ø—å¬ª",
  business: "—Ä–∞–±–æ—Ç–∞ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ —Ä–æ—Å—Ç–∞, —á—É–∂–æ–π –ø—Ä–æ–µ–∫—Ç –±–µ–∑ –ø—Ä–∞–≤–∞ –≥–æ–ª–æ—Å–∞, —Å—Ç–∞–≥–Ω–∞—Ü–∏—è",
  education: "–Ω–µ–∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—á–µ–Ω–∏–∫–æ–≤, –±—é—Ä–æ–∫—Ä–∞—Ç–∏—è –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏",
  communication: "–∏–∑–æ–ª—è—Ü–∏—è –∏ —Ä–∞–±–æ—Ç–∞ –≤ –æ–¥–∏–Ω–æ—á–∫—É, –∑–∞–¥–∞—á–∏ –±–µ–∑ –∂–∏–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ª—é–¥—å–º–∏",
  management: "—Ö–∞–æ—Å –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–æ–º–∞–Ω–¥–∞ –±–µ–∑ –º–æ—Ç–∏–≤–∞—Ü–∏–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏",
  practical: "—Å–∏–¥—è—á–∞—è –æ—Ñ–∏—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±–µ–∑ –≤–∏–¥–∏–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Ç—Ä—É–¥",
  research: "–ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≥–ª—É–±–æ–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –≤–∞–∂–µ–Ω",
  freedom: "–∂—ë—Å—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –æ–¥–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è",
};

const FORMAT_TEXT: Record<string, string> = {
  creative: "–ø—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏–ª–∏ —Ñ—Ä–∏–ª–∞–Ω—Å, –≥–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å",
  help_people: "–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∏–ª–∏ –≥—Ä—É–ø–ø–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ª—é–¥—å–º–∏, –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–æ–º–∞–Ω–¥–∞ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤",
  analytics: "—Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, —á—ë—Ç–∫–∏–µ –∑–∞–¥–∞—á–∏, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è",
  business: "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã—Å–æ–∫–∞—è –∞–≤—Ç–æ–Ω–æ–º–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–∞–Ω–∏–∏, –ø—Ä—è–º–∞—è —Å–≤—è–∑—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è",
  education: "–≥–∏–±—Ä–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–æ–Ω–ª–∞–π–Ω + –æ—Ñ–ª–∞–π–Ω), —Ä–∞–±–æ—Ç–∞ —Å –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π",
  communication: "–∞–∫—Ç–∏–≤–Ω–∞—è –≤–Ω–µ—à–Ω—è—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è, –ø—É–±–ª–∏—á–Ω–æ—Å—Ç—å, —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
  management: "—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π, –ø—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞, —á—ë—Ç–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞",
  practical: "—Ä–∞–±–æ—Ç–∞ ¬´–≤ –ø–æ–ª—è—Ö¬ª, —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –≤–∏–¥–∏–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è",
  research: "—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º, –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",
  freedom: "—É–¥–∞–ª—ë–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞",
};

// ‚îÄ‚îÄ‚îÄ –ú–û–ù–ï–¢–ò–ó–ê–¶–ò–Ø ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const MONETIZATION: Record<string, { start: string; mid: string; scale: string }> = {
  creative: {
    start: "—Ñ—Ä–∏–ª–∞–Ω—Å-–∑–∞–∫–∞–∑—ã –Ω–∞ –±–∏—Ä–∂–µ (Kwork, FL.ru), –ø—Ä–æ–¥–∞–∂–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ (–ø—Ä–∏–Ω—Ç—ã, —à–∞–±–ª–æ–Ω—ã), –≤–µ–¥–µ–Ω–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π –∑–∞ –Ω–µ–±–æ–ª—å—à–æ–π –≥–æ–Ω–æ—Ä–∞—Ä",
    mid: "–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ, –ø—Ä–æ–¥–∞–∂–∞ –∫—É—Ä—Å–æ–≤ –∏–ª–∏ –ø—Ä–µ—Å–µ—Ç–æ–≤, –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (—Ä–µ–∫–ª–∞–º–∞, –¥–æ–Ω–∞—Ç—ã)",
    scale: "–∞–≥–µ–Ω—Ç—Å—Ç–≤–æ, –ø—Ä–æ–¥—é—Å–µ—Ä—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±—Ä–µ–Ω–¥, –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞",
  },
  help_people: {
    start: "–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ 1500‚Äì3000 ‚ÇΩ/—á–∞—Å, –≥—Ä—É–ø–ø–æ–≤—ã–µ —Ä–∞–∑–±–æ—Ä—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö, –Ω–µ–±–æ–ª—å—à–∏–µ –∫—É—Ä—Å—ã",
    mid: "–∫–æ—É—á–∏–Ω–≥–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã 30‚Äì90 –¥–Ω–µ–π, —Å–≤–æ—è –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª–∞, –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ —Å –∫–ª–∏–Ω–∏–∫–∞–º–∏ –∏–ª–∏ —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–∞–º–∏",
    scale: "–º–∞—Å—à—Ç–∞–±–Ω–∞—è –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª–∞, —Ñ—Ä–∞–Ω—à–∏–∑–∞ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏, –∫–Ω–∏–≥–∏ –∏ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è",
  },
  analytics: {
    start: "—Ñ—Ä–∏–ª–∞–Ω—Å-–∞—É–¥–∏—Ç—ã (—Å–∞–π—Ç–æ–≤, —Ä–µ–∫–ª–∞–º—ã, —Ñ–∏–Ω–∞–Ω—Å–æ–≤), —Ä–∞–∑–æ–≤—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏",
    mid: "–≤–µ–¥–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–∞ –∞—É—Ç—Å–æ—Ä—Å–µ –¥–ª—è 3‚Äì5 –∫–ª–∏–µ–Ω—Ç–æ–≤, –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ –∫–æ–º–ø–∞–Ω–∏–∏",
    scale: "–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ, SaaS-–ø—Ä–æ–¥—É–∫—Ç, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è",
  },
  business: {
    start: "–∞—Ä–±–∏—Ç—Ä–∞–∂, –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∞, –¥—Ä–æ–ø—à–∏–ø–ø–∏–Ω–≥, –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî –±–µ–∑ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è",
    mid: "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–∏–∑–Ω–µ—Å —Å –∫–æ–º–∞–Ω–¥–æ–π 3‚Äì7 —á–µ–ª–æ–≤–µ–∫, –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–¥—É–∫—Ç —Å –∞–≤—Ç–æ–≤–æ—Ä–æ–Ω–∫–æ–π",
    scale: "–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤, —Ñ—Ä–∞–Ω—à–∏–∑–∞, –≤–µ–Ω—á—É—Ä–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏",
  },
  education: {
    start: "—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—Å—Ç–≤–æ, –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã, –Ω–µ–±–æ–ª—å—à–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤—ã –ø–æ —Å–≤–æ–µ–π —Ç–µ–º–µ",
    mid: "–∞–≤—Ç–æ—Ä—Å–∫–∏–π –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–∞, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏–Ω–≥–∏",
    scale: "–æ–Ω–ª–∞–π–Ω-—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –∏–∑–¥–∞–Ω–∏–µ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",
  },
  communication: {
    start: "–≤–µ–¥–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∑–∞ –Ω–µ–±–æ–ª—å—à–æ–π –≥–æ–Ω–æ—Ä–∞—Ä, PR-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –≤–µ–¥–µ–Ω–∏–µ —Å–æ—Ü—Å–µ—Ç–µ–π",
    mid: "–∞–≥–µ–Ω—Ç—Å—Ç–≤–æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±—Ä–µ–Ω–¥–∏–Ω–≥, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è",
    scale: "–º–µ–¥–∏–∞-–∫–æ–º–ø–∞–Ω–∏—è, –∫–Ω–∏–≥–∏, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —à–æ—É –∏–ª–∏ –ø–æ–¥–∫–∞—Å—Ç —Å —Ä–µ–∫–ª–∞–º–æ–π",
  },
  management: {
    start: "–ø—Ä–æ–µ–∫—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞—É—Ç—Å–æ—Ä—Å–µ, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ—Ü–µ—Å—Å–∞–º",
    mid: "PM/COO –≤ –∫–æ–º–ø–∞–Ω–∏–∏, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ",
    scale: "—É–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø–∞—Ä—Ç–Ω—ë—Ä, —Ö–æ–ª–¥–∏–Ω–≥, –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è",
  },
  practical: {
    start: "—á–∞—Å—Ç–Ω—ã–µ –∑–∞–∫–∞–∑—ã –∏ —É—Å–ª—É–≥–∏ —Ä—è–¥–æ–º —Å –¥–æ–º–æ–º, –ø—Ä–æ–¥–∞–∂–∞ –∏–∑–¥–µ–ª–∏–π —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã",
    mid: "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è –∏–ª–∏ —Å—Ç—É–¥–∏—è, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ",
    scale: "–±—Ä–µ–Ω–¥, —Ñ—Ä–∞–Ω—à–∏–∑–∞, –æ–±—É—á–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤—É",
  },
  research: {
    start: "—Ñ—Ä–∏–ª–∞–Ω—Å-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å–∞, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ —Ç–µ–º–µ",
    mid: "–¥–æ–ª–∂–Ω–æ—Å—Ç—å –≤ R&D –∏–ª–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–æ–º–ø–∞–Ω–∏–∏, –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥",
    scale: "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä, –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –≥—Ä–∞–Ω—Ç—ã",
  },
  freedom: {
    start: "—É–¥–∞–ª—ë–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –Ω–∞–π–º—É, —Ñ—Ä–∏–ª–∞–Ω—Å –Ω–∞ –∑–∞—Ä—É–±–µ–∂–Ω—ã—Ö –±–∏—Ä–∂–∞—Ö (Upwork, Toptal)",
    mid: "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ —Å–µ—Ä–≤–∏—Å, —Ä–∞–±–æ—Ç–∞ —Å –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏",
    scale: "–ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ (–∫—É—Ä—Å—ã, SaaS, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏), –ø–æ–ª–Ω–∞—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å",
  },
};

// ‚îÄ‚îÄ‚îÄ –ü–õ–ê–ù 30 –î–ù–ï–ô ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const PLAN_30: Record<string, string[]> = {
  creative: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî —Å–æ–±–µ—Ä–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏–∑ 5‚Äì7 —Ä–∞–±–æ—Ç, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –Ω–∞ Kwork –∏–ª–∏ Behance",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –æ–ø—É–±–ª–∏–∫—É–π –ø–µ—Ä–≤—ã–µ —Ä–∞–±–æ—Ç—ã, –Ω–∞–ø–∏—à–∏ 10 –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –≤–æ–∑—å–º–∏ –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ —Å–Ω–∏–∂–µ–Ω–Ω–æ–π —Ü–µ–Ω–µ, –ø–æ–ª—É—á–∏ –æ—Ç–∑—ã–≤",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π: —á—Ç–æ –∑–∞—à–ª–æ, –ø–æ–¥–Ω–∏–º–∏ —Ü–µ–Ω—É, –æ–ø—Ä–µ–¥–µ–ª–∏ –Ω–∏—à—É",
  ],
  help_people: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ—é –Ω–∏—à—É (–∫–æ—É—á–∏–Ω–≥ / –Ω—É—Ç—Ä–∏—Ü–∏—è / —Ñ–∏—Ç–Ω–µ—Å), —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –ø—Ä–æ–≤–µ–¥–∏ 3 –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, —Å–æ–±–µ—Ä–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî —Å–¥–µ–ª–∞–π –ø–µ—Ä–≤—É—é –ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é, —É—Å—Ç–∞–Ω–æ–≤–∏ –ø–µ—Ä–≤—É—é —Ü–µ–Ω—É",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –æ—Ñ–æ—Ä–º–∏ —Å–æ—Ü—Å–µ—Ç—å –∏–ª–∏ —Å–∞–π—Ç, –∑–∞–ø—É—Å—Ç–∏ –ø–µ—Ä–≤—É—é —Ä–µ–∫–ª–∞–º—É",
  ],
  analytics: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –≤—ã–±–µ—Ä–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (SEO / —Ñ–∏–Ω–∞–Ω—Å—ã / –¥–∞–Ω–Ω—ã–µ), –∏–∑—É—á–∏ —Ä—ã–Ω–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–π",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî —Å–¥–µ–ª–∞–π –ø—Ä–æ–±–Ω—ã–π –∞—É–¥–∏—Ç –∑–Ω–∞–∫–æ–º–æ–º—É –±–∏–∑–Ω–µ—Å—É, –æ—Ñ–æ—Ä–º–∏ –∫–∞–∫ –∫–µ–π—Å",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏ —É—Å–ª—É–≥—É 5‚Äì10 –º–∞–ª—ã–º –±–∏–∑–Ω–µ—Å–∞–º, –Ω–∞–∑–Ω–∞—á—å —Ü–µ–Ω—É",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –ø–æ–ª—É—á–∏ –ø–µ—Ä–≤—ã–π –æ—Ç–∑—ã–≤, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –Ω–∞ FL.ru –∫–∞–∫ –∞–Ω–∞–ª–∏—Ç–∏–∫",
  ],
  business: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –≤—ã–±–µ—Ä–∏ –Ω–∏—à—É, –ø—Ä–æ–≤–µ—Ä—å —Å–ø—Ä–æ—Å (–Ø–Ω–¥–µ–∫—Å –í–æ—Ä–¥—Å—Ç–∞—Ç, –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã)",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –∑–∞–∫—É–ø–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—É—é –ø–∞—Ä—Ç–∏—é, –∑–∞–ø—É—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –ø–µ—Ä–≤—ã–µ –ø—Ä–æ–¥–∞–∂–∏ –∏–ª–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã —Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –ø–æ—Å—á–∏—Ç–∞–π —ç–∫–æ–Ω–æ–º–∏–∫—É, —Ä–µ—à–∏: –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –º–µ–Ω—è—Ç—å –Ω–∏—à—É",
  ],
  education: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –≤—ã–±–µ—Ä–∏ —Ç–µ–º—É —É—Ä–æ–∫–∞ / –º–∏–Ω–∏-–∫—É—Ä—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–∏—Ö –∑–Ω–∞–Ω–∏–π",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –ø—Ä–æ–≤–µ–¥–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–µ–±–∏–Ω–∞—Ä –∏–ª–∏ —É—Ä–æ–∫, —Å–æ–±–µ—Ä–∏ –∞—É–¥–∏—Ç–æ—Ä–∏—é",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –∑–∞–ø—É—Å—Ç–∏ –ø–ª–∞—Ç–Ω—ã–π –º–∏–Ω–∏-–∫—É—Ä—Å –∏–ª–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî —Å–æ–±–µ—Ä–∏ –æ—Ç–∑—ã–≤—ã, —É–ª—É—á—à–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É, –Ω–∞–∑–Ω–∞—á—å —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫",
  ],
  communication: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏ —Ñ–æ—Ä–º–∞—Ç (–≤–µ–¥—É—â–∏–π / PR / SMM), —Å–æ—Å—Ç–∞–≤—å –º–µ–¥–∏–∞–∫–∏—Ç",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –≤—ã–π–¥–∏ –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø—É–±–ª–∏—á–Ω–æ–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏–ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—é",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏ —É—Å–ª—É–≥–∏ 3‚Äì5 –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º –∏–ª–∏ –ø–ª–æ—â–∞–¥–∫–∞–º",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –ø–æ–ª—É—á–∏ –ø–µ—Ä–≤—ã–π –ø–ª–∞—Ç–Ω—ã–π –∑–∞–∫–∞–∑, –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π –∫–µ–π—Å",
  ],
  management: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî —Å–æ—Å—Ç–∞–≤—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏—Ö –∫–µ–π—Å–æ–≤ –∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏ –ø—Ä–æ–µ–∫—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–∫–æ–º–æ–º—É –±–∏–∑–Ω–µ—Å—É (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏–ª–∏ –ø–æ-–º–∏–Ω–∏–º—É–º—É)",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –æ—Ñ–æ—Ä–º–∏ –≤ –∫–µ–π—Å",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –æ–ø—É–±–ª–∏–∫—É–π –∫–µ–π—Å –Ω–∞ LinkedIn / hh.ru, –Ω–∞—á–Ω–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –æ –ø–µ—Ä–≤–æ–º –ø–ª–∞—Ç–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ",
  ],
  practical: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏ 2‚Äì3 —É—Å–ª—É–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—à—å –Ω–∞—á–∞—Ç—å –æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî —Ä–∞—Å—Å–∫–∞–∂–∏ –∑–Ω–∞–∫–æ–º—ã–º, —Ä–∞–∑–º–µ—Å—Ç–∏—Å—å –≤ –ê–≤–∏—Ç–æ / –º–µ—Å—Ç–Ω—ã—Ö –≥—Ä—É–ø–ø–∞—Ö",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –≤—ã–ø–æ–ª–Ω–∏ –ø–µ—Ä–≤—ã–µ –∑–∞–∫–∞–∑—ã, —Å–æ–±–µ—Ä–∏ –æ—Ç–∑—ã–≤—ã, —Å–¥–µ–ª–∞–π —Ñ–æ—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –ø–æ–¥–Ω–∏–º–∏ —Ü–µ–Ω—É, –∑–∞–ø—É—Å—Ç–∏ —Å–∞—Ä–∞—Ñ–∞–Ω, —Ä–µ—à–∏: —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–∞–Ω—è—Ç—å –ø–æ–º–æ—â–Ω–∏–∫–∞",
  ],
  research: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –≤—ã–±–µ—Ä–∏ —É–∑–∫—É—é —Ç–µ–º—É –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã, –∏–∑—É—á–∏ —Ä—ã–Ω–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –Ω–∞–ø–∏—à–∏ –ø–µ—Ä–≤—É—é –ø—É–±–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ —Å–¥–µ–ª–∞–π –º–∏–Ω–∏-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏ —É—Å–ª—É–≥—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è 3‚Äì5 –∫–æ–º–ø–∞–Ω–∏—è–º",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –ø–æ–ª—É—á–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å, —É—Ç–æ—á–Ω–∏ –Ω–∏—à—É, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –∫–∞–∫ —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä",
  ],
  freedom: [
    "–ù–µ–¥–µ–ª—è 1 ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏ –Ω–∞–≤—ã–∫, —Å –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —É–¥–∞–ª—ë–Ω–Ω–æ / —Ñ—Ä–∏–ª–∞–Ω—Å–æ–º",
    "–ù–µ–¥–µ–ª—è 2 ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –Ω–∞ Upwork / Kwork / –±–∏—Ä–∂–∞—Ö, —Å–æ–∑–¥–∞–π –ø—Ä–æ—Ñ–∏–ª—å",
    "–ù–µ–¥–µ–ª—è 3 ‚Äî –≤–æ–∑—å–º–∏ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –ø–æ –Ω–∏–∑–∫–æ–π —Ü–µ–Ω–µ —Ä–∞–¥–∏ –æ—Ç–∑—ã–≤–∞",
    "–ù–µ–¥–µ–ª—è 4 ‚Äî –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–æ—Ö–æ–¥ –∏ –≤—Ä–µ–º—è, –≤—ã—Å—Ç—Ä–æ–π –ø–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –ø–æ–ª–Ω–æ–π —É–¥–∞–ª—ë–Ω–∫–µ",
  ],
};

// ‚îÄ‚îÄ‚îÄ –ê–õ–ì–û–†–ò–¢–ú ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

function preprocess(text: string): string[] {
  const cleaned = text.toLowerCase().replace(/[.,!?;:()"¬´¬ª-]/g, " ");
  const stopWords = new Set([
    "–∏","–≤","–Ω–∞","—Å","–ø–æ","–∑–∞","–æ—Ç","–¥–æ","–∏–∑","–∫","—É","–æ","–∞","–Ω–æ","–∏–ª–∏","—ç—Ç–æ","–∫–∞–∫","—á—Ç–æ","–æ–Ω","–æ–Ω–∞","–æ–Ω–∏","–º—ã","–≤—ã","—è","—Ç–æ","–Ω–µ","–∂–µ","–±—ã","–ª–∏",
    "–ø—Ä–∏","–¥–ª—è","–æ–±","—Å–æ","–ø–æ–¥","–Ω–∞–¥","–±–µ–∑","—á–µ—Ä–µ–∑","–º–µ–∂–¥—É","–≤–æ","–ø—Ä–æ","—á—Ç–æ–±—ã","–∫–æ–≥–¥–∞","–µ—Å–ª–∏","—Ç–∞–∫","–µ—â–µ","—É–∂–µ","–≤–æ—Ç","–≤—Å–µ","—Ç–æ–∂–µ","–≤—Å—ë","—Å–≤–æ–∏","—Å–≤–æ—ë","—Å–≤–æ—è","—Å–≤–æ–∏—Ö",
  ]);
  return cleaned.split(/\s+/).filter((w) => w.length > 2 && !stopWords.has(w));
}

function segmentActivities(activities: string[]): Record<string, number> {
  const scores: Record<string, number> = {};
  Object.keys(SEGMENT_KEYWORDS).forEach((s) => (scores[s] = 0));

  for (const activity of activities) {
    const lemmas = preprocess(activity);
    const matched: string[] = [];

    for (const seg of Object.keys(SEGMENT_KEYWORDS)) {
      const keywords = SEGMENT_KEYWORDS[seg];
      const hit = lemmas.some((lemma) => keywords.some((kw) => lemma.startsWith(kw) || kw.startsWith(lemma.slice(0, 5))));
      if (hit) matched.push(seg);
    }

    if (matched.length === 1) {
      scores[matched[0]] += 1;
    } else if (matched.length > 1) {
      const w = 1 / matched.length;
      matched.forEach((s) => (scores[s] += w));
    }
  }

  const total = Object.values(scores).reduce((a, b) => a + b, 0);
  if (total > 0) {
    Object.keys(scores).forEach((s) => (scores[s] = scores[s] / total));
  }

  return scores;
}

function getTop2(scores: Record<string, number>): [string, string] {
  const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
  return [sorted[0][0], sorted[1][0]];
}

function analyzeMotivation(text: string): Record<string, number> {
  const scores: Record<string, number> = {};
  Object.keys(MOTIVATION_MARKERS).forEach((m) => (scores[m] = 0));
  const lemmas = preprocess(text);
  for (const lemma of lemmas) {
    for (const m of Object.keys(MOTIVATION_MARKERS)) {
      if (MOTIVATION_MARKERS[m].some((mk) => lemma.startsWith(mk) || mk.startsWith(lemma.slice(0, 5)))) {
        scores[m] += 1;
      }
    }
  }
  return scores;
}

function getPrimaryMotivation(scores: Record<string, number>): string {
  const max = Math.max(...Object.values(scores));
  if (max === 0) return "process";
  return Object.keys(scores).find((k) => scores[k] === max) ?? "process";
}

function rankProfessions(segment: string, primaryMotivation: string): Profession[] {
  const profs = (SEGMENT_PROFESSIONS[segment] ?? []).map((p) => ({
    ...p,
    score: p.tags.includes(primaryMotivation) ? 2 : 1,
  }));
  return profs.sort((a, b) => b.score - a.score).slice(0, 10);
}

function calcBurnout(
  motivationScores: Record<string, number>,
  primaryMotivation: string,
  selectedProf: Profession | undefined,
  segScores: Record<string, number>
): number {
  let burnout = 0;

  if (selectedProf && !selectedProf.tags.includes(primaryMotivation)) burnout += 2;

  const moneyOnly =
    motivationScores["money"] > 0 &&
    Object.entries(motivationScores).every(([k, v]) => k === "money" || v === 0);
  if (moneyOnly) burnout += 2;

  const sorted = Object.entries(segScores).sort((a, b) => b[1] - a[1]);
  if (sorted.length >= 2 && sorted[0][1] - sorted[1][1] < 0.05) burnout += 1;

  return burnout;
}

function buildReport(
  topSeg: string,
  primaryMotivation: string,
  selectedProfName: string,
  segScores: Record<string, number>,
  motivationScores: Record<string, number>
): string {
  const selectedProf = (SEGMENT_PROFESSIONS[topSeg] ?? []).find((p) => p.name === selectedProfName);
  const burnoutScore = calcBurnout(motivationScores, primaryMotivation, selectedProf, segScores);
  const risk = burnoutScore <= 1 ? "üü¢ –ù–∏–∑–∫–∏–π" : burnoutScore <= 3 ? "üü° –°—Ä–µ–¥–Ω–∏–π" : "üî¥ –í—ã—Å–æ–∫–∏–π";
  const profileName = PROFILE_MATRIX[primaryMotivation]?.[topSeg] ?? "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å";
  const mon = MONETIZATION[topSeg];
  const plan = PLAN_30[topSeg] ?? [];

  const topSegsDisplay = Object.entries(segScores)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 3)
    .map(([s, v]) => `${SEGMENT_NAMES[s]} ‚Äî ${Math.round(v * 100)}%`)
    .join("\n‚Ä¢ ");

  return `## 1Ô∏è‚É£ –¢–≤–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å

**–¢–∏–ø –ª–∏—á–Ω–æ—Å—Ç–∏:** ${profileName}
**–í–µ–¥—É—â–∏–π —Å–µ–≥–º–µ–Ω—Ç:** ${SEGMENT_NAMES[topSeg]}
**–í–µ–¥—É—â–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è:** ${MOTIVATION_NAMES[primaryMotivation]}

**–ß—Ç–æ –¥–∞—ë—Ç —Ç–µ–±–µ —ç–Ω–µ—Ä–≥–∏—é:**
${ENERGY_TEXT[topSeg]}

**–ì–¥–µ —Ç—ã –±—É–¥–µ—à—å –≤—ã–≥–æ—Ä–∞—Ç—å:**
${BURNOUT_TEXT[topSeg]}

**–ü–æ–¥—Ö–æ–¥—è—â–∏–π —Ñ–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç—ã:**
${FORMAT_TEXT[topSeg]}

---

## 2Ô∏è‚É£ –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–ü–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
‚Ä¢ ${topSegsDisplay}

–¢—ã –≤—ã–±—Ä–∞–ª –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ **¬´${SEGMENT_NAMES[topSeg]}¬ª** –∏ –æ–±—ä—è—Å–Ω–∏–ª —ç—Ç–æ —á–µ—Ä–µ–∑ –º–æ—Ç–∏–≤–∞—Ü–∏—é **¬´${MOTIVATION_NAMES[primaryMotivation]}¬ª**. –≠—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –æ—Ä–≥–∞–Ω–∏—á–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–µ–∑ –≤—ã–≥–æ—Ä–∞–Ω–∏—è.

–í—ã–±—Ä–∞–Ω–Ω–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏—è **¬´${selectedProfName}¬ª** ‚Äî –ø—Ä—è–º–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å.

---

## 3Ô∏è‚É£ –í–∞—Ä–∏–∞–Ω—Ç—ã –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏

**üîπ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç (–±–µ–∑ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è):**
${mon.start}

**üîπ –î–æ—Ö–æ–¥ 50‚Äì100 —Ç—ã—Å/–º–µ—Å:**
${mon.mid}

**üîπ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
${mon.scale}

---

## 4Ô∏è‚É£ –†–∏—Å–∫ –≤—ã–≥–æ—Ä–∞–Ω–∏—è: ${risk}

${
  burnoutScore <= 1
    ? "–í—ã–±—Ä–∞–Ω–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö–æ—Ä–æ—à–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–≤–æ–µ–π –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π –∏ –ø—Ä–µ–¥—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é. –†–∏—Å–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π."
    : burnoutScore <= 3
    ? "–ï—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –º–µ–∂–¥—É –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º. –°–ª–µ–¥–∏ –∑–∞ –±–∞–ª–∞–Ω—Å–æ–º ‚Äî –Ω–µ –≥–æ–Ω–∏—Å—å —Ç–æ–ª—å–∫–æ –∑–∞ –¥–µ–Ω—å–≥–∞–º–∏ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–º."
    : "–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Å–≤—è–∑–∞–Ω —Å —Ç–µ–º, —á—Ç–æ –º–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å. –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å–º—ã—Å–ª–∞ –≤ —Ä–∞–±–æ—Ç—É."
}

---

## 5Ô∏è‚É£ –ü–ª–∞–Ω –Ω–∞ 30 –¥–Ω–µ–π

${plan.map((p, i) => `**${p.split("‚Äî")[0]}‚Äî**${p.split("‚Äî").slice(1).join("‚Äî")}`).join("\n\n")}

---

–°–æ—Ö—Ä–∞–Ω–∏ —ç—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –û–Ω –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ç–≤–æ–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö, –∞ –Ω–µ –Ω–∞ —à–∞–±–ª–æ–Ω–µ.`;
}

// ‚îÄ‚îÄ‚îÄ –ú–ê–®–ò–ù–ê –°–û–°–¢–û–Ø–ù–ò–ô ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

type BotState = {
  step: BotStep;
  activities: string[];
  segmentScores: Record<string, number>;
  top2: [string, string] | null;
  chosenSegment: string | null;
  motivationText: string;
  motivationScores: Record<string, number>;
  primaryMotivation: string;
  professions: Profession[];
  ratings: Record<string, number>;
  highRated: string[];
  selectedProfession: string | null;
};

const INITIAL_STATE: BotState = {
  step: "welcome",
  activities: [],
  segmentScores: {},
  top2: null,
  chosenSegment: null,
  motivationText: "",
  motivationScores: {},
  primaryMotivation: "process",
  professions: [],
  ratings: {},
  highRated: [],
  selectedProfession: null,
};

// ‚îÄ‚îÄ‚îÄ –ö–û–ú–ü–û–ù–ï–ù–¢ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

function renderText(text: string) {
  const lines = text.split("\n");
  return lines.map((line, i) => {
    if (line.startsWith("## ")) {
      return <h3 key={i} className="text-base font-bold mt-4 mb-1 text-gray-900">{line.replace(/^#+\s*/, "").replace(/\*\*/g, "")}</h3>;
    }
    if (line.startsWith("# ")) {
      return <h2 key={i} className="text-lg font-bold mt-4 mb-1 text-gray-900">{line.replace(/^#+\s*/, "").replace(/\*\*/g, "")}</h2>;
    }
    if (line.startsWith("---")) {
      return <hr key={i} className="my-3 border-gray-200" />;
    }
    const formatted = line
      .replace(/\*\*(.+?)\*\*/g, "<strong>$1</strong>")
      .replace(/\*(.+?)\*/g, "<em>$1</em>");
    if (line.startsWith("‚Ä¢ ") || line.startsWith("- ")) {
      return (
        <p key={i} className="flex gap-1.5 my-0.5 text-sm leading-relaxed">
          <span className="mt-[6px] shrink-0 w-1.5 h-1.5 rounded-full bg-indigo-400 inline-block" />
          <span dangerouslySetInnerHTML={{ __html: formatted.replace(/^[‚Ä¢-]\s*/, "") }} />
        </p>
      );
    }
    if (line.trim() === "") return <div key={i} className="h-1" />;
    return <p key={i} className="my-0.5 text-sm leading-relaxed" dangerouslySetInnerHTML={{ __html: formatted }} />;
  });
}

function RatingWidget({ professions, onSubmit }: { professions: string[]; onSubmit: (ratings: Record<string, number>) => void }) {
  const [ratings, setRatings] = useState<Record<string, number>>({});
  const allRated = professions.every((p) => ratings[p] !== undefined);

  return (
    <div className="mt-2 space-y-3">
      {professions.map((prof) => (
        <div key={prof} className="bg-gray-50 rounded-xl p-3">
          <p className="text-sm font-medium text-gray-800 mb-2">{prof}</p>
          <div className="flex gap-1.5">
            {[1, 2, 3, 4, 5].map((score) => (
              <button
                key={score}
                onClick={() => setRatings((r) => ({ ...r, [prof]: score }))}
                className={`w-9 h-9 rounded-lg text-sm font-bold transition-all ${
                  ratings[prof] === score
                    ? "bg-indigo-600 text-white shadow-md scale-110"
                    : "bg-white border border-gray-200 text-gray-600 hover:border-indigo-400"
                }`}
              >
                {score}
              </button>
            ))}
          </div>
        </div>
      ))}
      {allRated && (
        <button
          onClick={() => onSubmit(ratings)}
          className="w-full bg-indigo-600 text-white font-semibold py-3 rounded-xl hover:bg-indigo-700 transition-colors text-sm mt-2"
        >
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫–∏ ‚Üí
        </button>
      )}
    </div>
  );
}

export default function PsychBot() {
  const navigate = useNavigate();
  const [messages, setMessages] = useState<Message[]>([]);
  const [botState, setBotState] = useState<BotState>(INITIAL_STATE);
  const [input, setInput] = useState("");
  const [loading, setLoading] = useState(false);
  const [hasAccess, setHasAccess] = useState(false);
  const bottomRef = useRef<HTMLDivElement>(null);
  const inputRef = useRef<HTMLTextAreaElement>(null);

  const addMsg = (from: "bot" | "user", text: string, widget?: Widget) => {
    const id = Date.now() + Math.random();
    setMessages((m) => [...m, { id, from, text, widget }]);
  };

  const botReply = (text: string, widget?: Widget, delay = 600) => {
    setLoading(true);
    setTimeout(() => {
      setLoading(false);
      addMsg("bot", text, widget);
    }, delay);
  };

  useEffect(() => {
    const u = localStorage.getItem("pdd_user");
    if (!u) { navigate("/auth"); return; }
    const userData = JSON.parse(u);

    const paid = localStorage.getItem(`psych_paid_${userData.email}`);
    if (paid === "true") setHasAccess(true);

    const savedMessages = localStorage.getItem(`psych_chat2_${userData.email}`);
    const savedState = localStorage.getItem(`psych_state2_${userData.email}`);

    if (savedMessages && savedState) {
      setMessages(JSON.parse(savedMessages));
      setBotState(JSON.parse(savedState));
    } else {
      setTimeout(() => {
        addMsg("bot", `–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≤ –∫–∞–∫–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ç–µ–±–µ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ –∏ —ç–Ω–µ—Ä–≥–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

–≠—Ç–æ –∞–Ω–∞–ª–∏–∑ –∏–∑ 5 —ç—Ç–∞–ø–æ–≤. –ù–∏–∫–∞–∫–æ–≥–æ AI ‚Äî —Ç–æ–ª—å–∫–æ –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.

–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å?`, {
          type: "button_list",
          options: ["–î–∞, –Ω–∞—á–Ω—ë–º!"],
        });
      }, 400);
    }
  }, [navigate]);

  useEffect(() => {
    bottomRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages, loading]);

  useEffect(() => {
    const u = localStorage.getItem("pdd_user");
    if (!u) return;
    const userData = JSON.parse(u);
    if (messages.length > 0) {
      localStorage.setItem(`psych_chat2_${userData.email}`, JSON.stringify(messages));
      localStorage.setItem(`psych_state2_${userData.email}`, JSON.stringify(botState));
    }
  }, [messages, botState]);

  const handlePay = () => {
    const u = localStorage.getItem("pdd_user");
    if (!u) return;
    const userData = JSON.parse(u);
    localStorage.setItem(`psych_paid_${userData.email}`, "true");
    setHasAccess(true);
  };

  const handleReset = () => {
    const u = localStorage.getItem("pdd_user");
    if (!u) return;
    const userData = JSON.parse(u);
    localStorage.removeItem(`psych_chat2_${userData.email}`);
    localStorage.removeItem(`psych_state2_${userData.email}`);
    setMessages([]);
    setBotState(INITIAL_STATE);
    setTimeout(() => {
      addMsg("bot", `–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≤ –∫–∞–∫–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ç–µ–±–µ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ –∏ —ç–Ω–µ—Ä–≥–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

–≠—Ç–æ –∞–Ω–∞–ª–∏–∑ –∏–∑ 5 —ç—Ç–∞–ø–æ–≤. –ù–∏–∫–∞–∫–æ–≥–æ AI ‚Äî —Ç–æ–ª—å–∫–æ –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.

–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å?`, {
        type: "button_list",
        options: ["–î–∞, –Ω–∞—á–Ω—ë–º!"],
      });
    }, 300);
  };

  // ‚îÄ‚îÄ –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ù–û–ü–û–ö ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

  const handleButtonClick = (option: string) => {
    addMsg("user", option);

    const st = botState;

    // WELCOME ‚Üí COLLECT
    if (st.step === "welcome") {
      setBotState((s) => ({ ...s, step: "collect_activities" }));
      botReply(`–û—Ç–ª–∏—á–Ω–æ! 

**–≠—Ç–∞–ø 1 –∏–∑ 5 ‚Äî –°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π**

–í —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç –Ω–∞–ø–∏—à–∏ –≤—Å–µ –≤–∏–¥—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–º–∏ —Ç–µ–±–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –∑–∞–Ω–∏–º–∞—Ç—å—Å—è.

‚Ä¢ –ù–µ –æ—Ü–µ–Ω–∏–≤–∞–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å
‚Ä¢ –ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –¥–∞–∂–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
‚Ä¢ –ú–∏–Ω–∏–º—É–º 15 –ø—É–Ω–∫—Ç–æ–≤, –∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏

–ü—Ä–æ—Å—Ç–æ –ø–∏—à–∏ ‚Äî —è –ø–æ–¥–æ–∂–¥—É üëá`);
      return;
    }

    // SHOW_TOP2 ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ–≥–º–µ–Ω—Ç
    if (st.step === "show_top2" && st.top2) {
      const [seg1, seg2] = st.top2;
      const chosen = option.includes(SEGMENT_NAMES[seg1]) ? seg1 : seg2;
      setBotState((s) => ({ ...s, step: "ask_segment_why", chosenSegment: chosen }));
      botReply(`–•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä!

**–≠—Ç–∞–ø 3 –∏–∑ 5 ‚Äî –ê–Ω–∞–ª–∏–∑ –º–æ—Ç–∏–≤–∞—Ü–∏–∏**

–ù–∞–ø–∏—à–∏ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ: –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ ¬´${SEGMENT_NAMES[chosen]}¬ª –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è —Ç–µ–±–µ —Å–∏–ª—å–Ω–µ–µ?

–ß—Ç–æ –≤ —ç—Ç–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç ‚Äî –¥–µ–Ω—å–≥–∏, —Å–≤–æ–±–æ–¥–∞, —Å–º—ã—Å–ª, –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ, –ø—Ä–æ—Ü–µ—Å—Å? –ß–µ–º —á–µ—Å—Ç–Ω–µ–µ, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –∞–Ω–∞–ª–∏–∑.`);
      return;
    }

    // ASK_FINAL_CHOICE ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã—Å–æ–∫–æ–æ—Ü–µ–Ω—ë–Ω–Ω—ã—Ö
    if (st.step === "ask_final_choice") {
      setBotState((s) => ({ ...s, step: "report", selectedProfession: option }));
      const report = buildReport(
        st.chosenSegment!,
        st.primaryMotivation,
        option,
        st.segmentScores,
        st.motivationScores
      );
      botReply(`–û—Ç–ª–∏—á–Ω–æ, —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω.\n\n–ì–µ–Ω–µ—Ä–∏—Ä—É—é —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç...`, undefined, 400);
      setTimeout(() => {
        addMsg("bot", report);
        setLoading(false);
      }, 1800);
      return;
    }
  };

  // ‚îÄ‚îÄ –û–ë–†–ê–ë–û–¢–ß–ò–ö –û–¶–ï–ù–û–ö ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

  const handleRatingsSubmit = (ratings: Record<string, number>) => {
    const ratingsText = Object.entries(ratings)
      .map(([p, s]) => `${p}: ${s}`)
      .join(", ");
    addMsg("user", `–û—Ü–µ–Ω–∫–∏: ${ratingsText}`);

    const highRated = Object.entries(ratings)
      .filter(([, s]) => s >= 4)
      .map(([p]) => p);

    const st = botState;

    if (highRated.length === 0) {
      setBotState((s) => ({ ...s, step: "show_professions", ratings }));
      botReply(`–ù–∏ –æ–¥–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–±—Ä–∞–ª–æ 4+ –±–∞–ª–ª–æ–≤. –î–∞–≤–∞–π –µ—â—ë —Ä–∞–∑ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å–ø–∏—Å–æ–∫ ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, —Ç—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—à—å —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ.

–ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞: —á—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ —Ç—ã –º–æ–≥ –±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è?`, {
        type: "rating_list",
        professions: st.professions.map((p) => p.name),
      });
      return;
    }

    if (highRated.length === 1) {
      const prof = highRated[0];
      setBotState((s) => ({ ...s, step: "report", ratings, highRated, selectedProfession: prof }));
      botReply(`–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª: **¬´${prof}¬ª** ‚Äî —Ç–≤–æ–π –≥–ª–∞–≤–Ω—ã–π –≤—ã–±–æ—Ä.

–ì–µ–Ω–µ—Ä–∏—Ä—É—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç...`, undefined, 400);
      setTimeout(() => {
        const report = buildReport(
          st.chosenSegment!,
          st.primaryMotivation,
          prof,
          st.segmentScores,
          st.motivationScores
        );
        addMsg("bot", report);
        setLoading(false);
      }, 1800);
      return;
    }

    setBotState((s) => ({ ...s, step: "ask_final_choice", ratings, highRated }));
    botReply(
      `–ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Ç–µ–±–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞—á–∞—Ç—å —É–∂–µ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ ‚Äî —á—Ç–æ –≤—ã–±–µ—Ä–µ—à—å?`,
      { type: "button_list", options: highRated }
    );
  };

  // ‚îÄ‚îÄ –û–ë–†–ê–ë–û–¢–ß–ò–ö –¢–ï–ö–°–¢–û–í–û–ì–û –í–í–û–î–ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

  const handleTextSubmit = (text: string) => {
    if (!text.trim()) return;
    addMsg("user", text);
    setInput("");

    const st = botState;

    // –°–ë–û–† –ê–ö–¢–ò–í–ù–û–°–¢–ï–ô
    if (st.step === "collect_activities") {
      const activities = text
        .split(/\n|;|,/)
        .map((a) => a.replace(/^\d+[.)]\s*/, "").trim())
        .filter((a) => a.length > 2);

      if (activities.length < 5) {
        botReply(`–ú–∞–ª–æ–≤–∞—Ç–æ! –ù—É–∂–Ω–æ —Ö–æ—Ç—è –±—ã 15 –ø—É–Ω–∫—Ç–æ–≤ ‚Äî —Ç–∞–∫ –∞–Ω–∞–ª–∏–∑ –±—É–¥–µ—Ç —Ç–æ—á–Ω–µ–µ.

–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑: –ø–∏—à–∏ –≤—Å—ë, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–∞–∂–µ—Ç—Å—è –Ω–µ—Ä–µ–∞–ª—å–Ω—ã–º.`);
        return;
      }

      const segScores = segmentActivities(activities);
      const [seg1, seg2] = getTop2(segScores);

      setBotState((s) => ({
        ...s,
        step: "show_top2",
        activities,
        segmentScores: segScores,
        top2: [seg1, seg2],
      }));

      botReply(
        `–ü–æ–ª—É—á–∏–ª ${activities.length} –ø—É–Ω–∫—Ç–æ–≤ ‚Äî —Ö–æ—Ä–æ—à–æ!

**–≠—Ç–∞–ø 2 –∏–∑ 5 ‚Äî –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è**

–ü–æ —Ç–≤–æ–µ–º—É —Å–ø–∏—Å–∫—É –≤—ã–¥–µ–ª—è—é—Ç—Å—è –¥–≤–∞ –≤–µ–¥—É—â–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1Ô∏è‚É£ **${SEGMENT_NAMES[seg1]}**
2Ô∏è‚É£ **${SEGMENT_NAMES[seg2]}**

–ö–∞–∫–æ–µ –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ?`,
        {
          type: "button_list",
          options: [`1Ô∏è‚É£ ${SEGMENT_NAMES[seg1]}`, `2Ô∏è‚É£ ${SEGMENT_NAMES[seg2]}`],
        }
      );
      return;
    }

    // –ê–ù–ê–õ–ò–ó –ú–û–¢–ò–í–ê–¶–ò–ò
    if (st.step === "ask_segment_why") {
      const motivScores = analyzeMotivation(text);
      const primaryMotivation = getPrimaryMotivation(motivScores);
      const segment = st.chosenSegment!;
      const profs = rankProfessions(segment, primaryMotivation);

      setBotState((s) => ({
        ...s,
        step: "collect_ratings",
        motivationText: text,
        motivationScores: motivScores,
        primaryMotivation,
        professions: profs,
      }));

      const motivName = MOTIVATION_NAMES[primaryMotivation];

      botReply(
        `–ü–æ–Ω—è–ª. –¢–≤–æ—è –≤–µ–¥—É—â–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è ‚Äî **¬´${motivName}¬ª**.

**–≠—Ç–∞–ø 4 –∏–∑ 5 ‚Äî –ü–æ–¥–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π**

–í–Ω—É—Ç—Ä–∏ —Å–µ–≥–º–µ–Ω—Ç–∞ ¬´${SEGMENT_NAMES[segment]}¬ª ‚Äî –≤–æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ç–µ–±—è.

–û—Ü–µ–Ω–∏ –∫–∞–∂–¥–æ–µ –æ—Ç **1 –¥–æ 5**:
‚Ä¢ 1 ‚Äî –Ω–µ –º–æ—ë
‚Ä¢ 3 ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ
‚Ä¢ 5 ‚Äî –æ—á–µ–Ω—å –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è`,
        {
          type: "rating_list",
          professions: profs.map((p) => p.name),
        }
      );
      return;
    }
  };

  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault();
      handleTextSubmit(input);
    }
  };

  const showInput = hasAccess && (botState.step === "collect_activities" || botState.step === "ask_segment_why");

  return (
    <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex flex-col">
      {/* Header */}
      <div className="sticky top-0 z-10 bg-white/90 backdrop-blur border-b border-gray-100 px-4 py-3 flex items-center gap-3">
        <button onClick={() => navigate("/cabinet")} className="p-2 rounded-xl hover:bg-gray-100 transition-colors">
          <Icon name="ArrowLeft" size={18} className="text-gray-600" />
        </button>
        <div className="w-9 h-9 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shrink-0">
          <Icon name="Brain" size={18} className="text-white" />
        </div>
        <div className="flex-1 min-w-0">
          <p className="font-semibold text-gray-900 text-sm leading-tight">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</p>
          <p className="text-xs text-gray-500">5 —ç—Ç–∞–ø–æ–≤ ¬∑ –±–µ–∑ AI ¬∑ —Ç–æ–ª—å–∫–æ —Ç–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã</p>
        </div>
        {messages.length > 1 && (
          <button onClick={handleReset} className="p-2 rounded-xl hover:bg-gray-100 transition-colors text-gray-400 hover:text-gray-600" title="–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ">
            <Icon name="RotateCcw" size={16} />
          </button>
        )}
      </div>

      {/* Paywall */}
      {!hasAccess && (
        <div className="flex-1 flex items-center justify-center p-6">
          <div className="max-w-sm w-full bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
            <div className="bg-gradient-to-br from-indigo-500 to-purple-600 p-6 text-white text-center">
              <div className="w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center mx-auto mb-3">
                <Icon name="Brain" size={32} className="text-white" />
              </div>
              <h2 className="text-xl font-bold mb-1">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</h2>
              <p className="text-indigo-100 text-sm">–ü—Ä–æ—Ñ–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤—ã–≥–æ—Ä–∞–Ω–∏—è</p>
            </div>
            <div className="p-6">
              <ul className="space-y-3 mb-6">
                {[
                  "–ê–ª–≥–æ—Ä–∏—Ç–º —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ 10 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º",
                  "–ê–Ω–∞–ª–∏–∑ –≤–µ–¥—É—â–µ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏ (6 —Ç–∏–ø–æ–≤)",
                  "–ü–æ–¥–±–æ—Ä 8‚Äì10 –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –ø–æ–¥ —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å",
                  "–†–∞—Å—á—ë—Ç —Ä–∏—Å–∫–∞ –≤—ã–≥–æ—Ä–∞–Ω–∏—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ",
                  "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ 30 –¥–Ω–µ–π",
                ].map((item, i) => (
                  <li key={i} className="flex items-start gap-2.5 text-sm text-gray-700">
                    <Icon name="CheckCircle" size={16} className="text-indigo-500 mt-0.5 shrink-0" />
                    {item}
                  </li>
                ))}
              </ul>
              <div className="text-center mb-4">
                <span className="text-3xl font-bold text-gray-900">299 ‚ÇΩ</span>
                <span className="text-gray-500 text-sm ml-1">–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ</span>
              </div>
              <button onClick={handlePay} className="w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold py-3.5 rounded-xl hover:opacity-90 transition-opacity text-sm">
                –ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑ ‚Äî 299 ‚ÇΩ
              </button>
              <p className="text-center text-xs text-gray-400 mt-3">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Å—Å–∏—è ¬∑ ~15‚Äì20 –º–∏–Ω—É—Ç</p>
            </div>
          </div>
        </div>
      )}

      {/* Chat */}
      {hasAccess && (
        <>
          <div className="flex-1 overflow-y-auto px-4 py-4 space-y-3 pb-4">
            {messages.map((msg) => (
              <div key={msg.id} className={`flex ${msg.from === "user" ? "justify-end" : "justify-start"}`}>
                {msg.from === "bot" && (
                  <div className="w-7 h-7 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shrink-0 mr-2 mt-1">
                    <Icon name="Brain" size={14} className="text-white" />
                  </div>
                )}
                <div className={`max-w-[88%] ${msg.from === "user" ? "" : "w-full"}`}>
                  <div className={`rounded-2xl px-4 py-3 ${
                    msg.from === "user"
                      ? "bg-indigo-600 text-white rounded-tr-sm ml-auto inline-block"
                      : "bg-white border border-gray-100 shadow-sm rounded-tl-sm text-gray-800"
                  }`}>
                    {msg.from === "bot" ? (
                      <div className="text-sm leading-relaxed">{renderText(msg.text)}</div>
                    ) : (
                      <p className="text-sm leading-relaxed whitespace-pre-wrap">{msg.text}</p>
                    )}
                  </div>

                  {/* Widgets */}
                  {msg.from === "bot" && msg.widget && (
                    <div className="mt-2 ml-0">
                      {msg.widget.type === "button_list" && (
                        <div className="flex flex-wrap gap-2">
                          {msg.widget.options.map((opt) => (
                            <button
                              key={opt}
                              onClick={() => handleButtonClick(opt)}
                              disabled={botState.step === "report"}
                              className="bg-white border border-indigo-200 text-indigo-700 text-sm font-medium px-4 py-2 rounded-xl hover:bg-indigo-50 hover:border-indigo-400 transition-all disabled:opacity-40 disabled:cursor-default"
                            >
                              {opt}
                            </button>
                          ))}
                        </div>
                      )}
                      {msg.widget.type === "rating_list" && (
                        <RatingWidget
                          professions={msg.widget.professions}
                          onSubmit={handleRatingsSubmit}
                        />
                      )}
                    </div>
                  )}
                </div>
              </div>
            ))}

            {loading && (
              <div className="flex justify-start">
                <div className="w-7 h-7 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shrink-0 mr-2 mt-1">
                  <Icon name="Brain" size={14} className="text-white" />
                </div>
                <div className="bg-white border border-gray-100 shadow-sm rounded-2xl rounded-tl-sm px-4 py-3">
                  <div className="flex gap-1 items-center h-5">
                    <div className="w-1.5 h-1.5 rounded-full bg-indigo-400 animate-bounce" style={{ animationDelay: "0ms" }} />
                    <div className="w-1.5 h-1.5 rounded-full bg-indigo-400 animate-bounce" style={{ animationDelay: "150ms" }} />
                    <div className="w-1.5 h-1.5 rounded-full bg-indigo-400 animate-bounce" style={{ animationDelay: "300ms" }} />
                  </div>
                </div>
              </div>
            )}
            <div ref={bottomRef} />
          </div>

          {/* Input ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–∞–ø–∞—Ö —Å —Ç–µ–∫—Å—Ç–æ–º */}
          {showInput && (
            <div className="sticky bottom-0 bg-white/95 backdrop-blur border-t border-gray-100 px-4 py-3">
              <div className="flex gap-2 items-end">
                <textarea
                  ref={inputRef}
                  value={input}
                  onChange={(e) => setInput(e.target.value)}
                  onKeyDown={handleKeyDown}
                  placeholder={
                    botState.step === "collect_activities"
                      ? "–ü–∏—à–∏—Ç–µ –∫–∞–∂–¥—ã–π –≤–∏–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏..."
                      : "–ù–∞–ø–∏—à–∏—Ç–µ, –ø–æ—á–µ–º—É —ç—Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–º –±–ª–∏–∑–∫–æ..."
                  }
                  disabled={loading}
                  rows={3}
                  className="flex-1 resize-none rounded-xl border border-gray-200 px-3.5 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-300 focus:border-transparent disabled:opacity-50 leading-relaxed"
                  style={{ minHeight: "72px", maxHeight: "200px" }}
                  onInput={(e) => {
                    const el = e.currentTarget;
                    el.style.height = "auto";
                    el.style.height = Math.min(el.scrollHeight, 200) + "px";
                  }}
                />
                <button
                  onClick={() => handleTextSubmit(input)}
                  disabled={!input.trim() || loading}
                  className="w-11 h-11 rounded-xl bg-indigo-600 hover:bg-indigo-700 disabled:opacity-40 transition-colors flex items-center justify-center shrink-0 self-end"
                >
                  <Icon name="Send" size={18} className="text-white" />
                </button>
              </div>
              <p className="text-center text-xs text-gray-400 mt-1.5">Enter ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å ¬∑ Shift+Enter ‚Äî –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞</p>
            </div>
          )}
        </>
      )}
    </div>
  );
}